/*! inputEmail 2015-03-17 */
angular.module("bInputEmail",[]).directive("bInputEmail",function(a,b){return{restrict:"A",controller:function(a){function b(a,b){return 2==a.length&&0==b.search(a[1])?b.replace(a[1],""):""}a.inputEmail={list:{gmail:"gmail.com",hotmail:"hotmail.com",outlook:"outlook.com",yahoo:"yahoo.com",aol:"aol.com",live:"live.com",icloud:"icloud.com"}},this.validateString=function(c){if(c){var d=c.split("@");if(d.length>=2){for(var e in a.inputEmail.list)if(d[1].charAt(0)==e.charAt(0))return b(d,a.inputEmail.list[e]);return""}}}},link:function(a,c,d,e){var f=c.find("input"),g=angular.element('<track class="autocomplete">{{inputEmail.email}}</track>'),h=angular.element('<autocomplete class="autocomplete">{{inputEmail.autocomplete}}</autocomplete>');g=b(g)(a,function(a){c.append(a)}),h=b(h)(a,function(a){c.append(a)}),f.css("position","absolute").attr("autocomplete","off"),c.attr("position","relative"),h.css("display","inline-block").css("position","relative"),g.css("display","inline-block").css("visibility","hidden"),a.$watch("inputEmail.email",function(b){b=b||"",a.inputEmail.autocomplete=e.validateString(b)},!0),f.bind("blur",function(){""!=a.inputEmail.autocomplete&&(a.inputEmail.email+=a.inputEmail.autocomplete,a.inputEmail.autocomplete="",a.$apply())}),a.$apply()}}});